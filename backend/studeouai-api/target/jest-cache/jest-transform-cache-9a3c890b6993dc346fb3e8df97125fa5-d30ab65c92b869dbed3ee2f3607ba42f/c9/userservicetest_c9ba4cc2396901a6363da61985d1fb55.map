{"file":"/home/leo/Documentos/projetos/mine/TCC/StudeoUAI/backend/studeouai-api/src/modules/accounts/services/user-service.test.ts","mappings":"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","names":[],"sources":["/home/leo/Documentos/projetos/mine/TCC/StudeoUAI/backend/studeouai-api/src/modules/accounts/services/user-service.test.ts"],"sourcesContent":["import { repositoryMock } from '@modules/test/mock/typeorm.mock';\nimport { CreateUserRequest } from '../models/create-user-request';\nimport { UserResponse } from '../models/user-response';\nimport { UserService } from './user-service';\n\nimport faker from 'faker';\nimport { AppError } from '@shared/errors/app-error';\n\ndescribe('Test User Service', () => {\n  beforeEach(() => {\n    repositoryMock.find.mockRestore();\n    repositoryMock.findOne.mockRestore();\n    repositoryMock.save.mockRestore();\n    repositoryMock.update.mockRestore();\n  });\n\n  test('Should return response with a new user when call to create with success', async () => {\n    const createUserReturnMock: UserResponse = {\n      id: faker.datatype.uuid(),\n      name: faker.datatype.string(),\n      password: faker.datatype.string(),\n      email: faker.internet.email(),\n      isAdmin: false,\n      avatar: faker.datatype.string(),\n      avatar_url: faker.datatype.string(),\n    };\n\n    const createUserMock: CreateUserRequest = {\n      name: faker.datatype.uuid(),\n      password: faker.datatype.uuid(),\n      email: faker.internet.email(),\n    };\n\n    repositoryMock.create.mockResolvedValue(createUserReturnMock);\n\n    const userService = new UserService();\n    const response = await userService.createUser(createUserMock);\n\n    expect(response).toBe(createUserReturnMock);\n    expect(response).toBeTruthy();\n  });\n\n  test('Should error when try create a exists user', async () => {\n    const createUserReturnMock: UserResponse = {\n      id: faker.datatype.uuid(),\n      name: faker.datatype.string(),\n      password: faker.datatype.string(),\n      email: faker.internet.email(),\n      isAdmin: false,\n      avatar: faker.datatype.string(),\n      avatar_url: faker.datatype.string(),\n    };\n\n    const createUserMock: CreateUserRequest = {\n      name: faker.datatype.uuid(),\n      password: faker.datatype.uuid(),\n      email: faker.internet.email(),\n    };\n\n    repositoryMock.create.mockResolvedValue(createUserReturnMock);\n\n    const userService = new UserService();\n    userService.createUser(createUserMock);\n    try {\n      userService.createUser(createUserMock);\n    } catch (err) {\n      expect(err).toBeInstanceOf(AppError);\n      expect(err.message).toEqual('User already exists');\n    }\n  });\n\n  test('Should return a user when find user by id', async () => {\n    const createUserReturnMock: UserResponse = {\n      id: faker.datatype.uuid(),\n      name: faker.datatype.string(),\n      password: faker.datatype.string(),\n      email: faker.internet.email(),\n      isAdmin: false,\n      avatar: faker.datatype.string(),\n      avatar_url: faker.datatype.string(),\n    };\n\n    repositoryMock.findOne.mockResolvedValue(createUserReturnMock);\n\n    const userService = new UserService();\n    const response = await userService.findUserById('Any_Value');\n\n    expect(response).toBe(createUserReturnMock);\n    expect(response).toBeTruthy();\n  });\n\n  test('Should return error when call to user by id', async () => {\n    repositoryMock.findOne.mockRejectedValue(\n      new AppError('User not found', 404),\n    );\n    const findUserById = new UserService();\n\n    try {\n      await findUserById.findUserById('Any_Value');\n    } catch (error) {\n      expect(error.message).toEqual('User not found');\n    }\n  });\n});\n"],"version":3}