{"version":3,"sources":["/home/leo/Documentos/projetos/mine/TCC/StudeoUAI/backend/studeouai-api/src/modules/accounts/services/UserService.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["import { AppError } from '@shared/errors/appError';\nimport { hash } from 'bcryptjs';\nimport { getCustomRepository } from 'typeorm';\nimport CreateUserRequest from '../models/CreateUserRequest';\nimport { User } from '../typeorm/entities/User';\nimport { UsersRepository } from '../typeorm/repositories/UsersRepository';\n\nexport default class UserService {\n  async createUser({\n    name,\n    password,\n    email,\n    isAdmin,\n    avatar,\n  }: CreateUserRequest): Promise<User> {\n    const usersRepository = getCustomRepository(UsersRepository);\n    const emailExists = await usersRepository.findByEmail(email);\n\n    if (emailExists) {\n      throw new AppError('Email address already used.');\n    }\n\n    const passwordHash = await hash(\n      password,\n      Number(process.env.DEFAULT_HASH_SAULT),\n    );\n\n    const user = await usersRepository.create({\n      name,\n      password: passwordHash,\n      email,\n      isAdmin: false,\n      avatar: null,\n    });\n\n    await usersRepository.save(user);\n\n    return user;\n  }\n\n  async findUserById(id: string): Promise<User> {\n    const userRepository = getCustomRepository(UsersRepository);\n\n    const user = await userRepository.findById(id);\n\n    return user;\n  }\n}\n"]}